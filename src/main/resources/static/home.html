<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
    <head>
        <title>Spring Security Example</title>
        <link rel="stylesheet" type="text/css" href="extjs/ext-theme-neptune/resources/ext-theme-neptune-all.css">
        <script type="text/javascript" src="extjs/ext-all.js"></script>
        <script type="text/javascript" src="extjs/ext-theme-neptune/ext-theme-neptune.js"></script>
                <script type="text/javascript">

        Ext.onReady(function () {
                var field, panel;
                
                console.info("Here I am");
                
                field = Ext.create('Ext.form.field.Text', {
                        renderTo: Ext.getBody(),
                        margin: 10,
                        value: 'test text159'
                });

                panel = Ext.create('Ext.Panel', {
                        renderTo: Ext.getBody(),
                        title: 'Panel Example',
                        margin: 10,
                        layout: 'vbox',
                        width: 200,
                        height: 100,
                        scrollable: true
                });

                Ext.create('Ext.Button', {
                        renderTo: Ext.getBody(),
                        margin: 10,
                        text: 'Add panel text',
                        handler: function () {
                                panel.add({xtype: 'label',text:'AAA BBB'});
                        }
                });
                
                Ext.define('model.Eset', {
                        extend: 'Ext.data.Model',
                        fields: ['esid', 'panasz', 'statusz', 'nyitdate' ]
                });
                
                Ext.define('store.Eset', {
                        extend: 'Ext.data.Store',
                        model: 'model.Eset',
                        proxy: {
                                type: 'ajax',
                                url: 'beteg/5598/esetek'
                        }
                });
                
                var esetek = Ext.create('store.Eset');
                
                esetek.load(function () {
                        esetek.each(function (eset) {
                                panel.add({xtype: 'label',text:eset.get('esid') + " - " + eset.get('panasz')});
                        });
                });
                
                Ext.create('Ext.grid.Panel', {
                		renderTo: Ext.getBody(),
                		width: '1000px',
                        title: 'Esetek',
                        store: esetek,
                        xxplugins: [{
                                ptype: 'viewport'
                        }],
                        
                        columns: [{
                                text: 'ID',
                                dataIndex: 'esid',
                                flex: 1
                        }, 
                        {
                                text: 'Név',
                                dataIndex: 'panasz',
                                flex: 1
                        }, 
                        {
                                text: 'Státusz',
                                dataIndex: 'statusz',
                                flex: 1
                        }, 
                        {
                                text: 'Kezdödött',
                                dataIndex: 'nyitdate',
                                flex: 1
                        }]
                        });
                
        });
        </script>
        
    </head>
    <body>
    </body>
</html>